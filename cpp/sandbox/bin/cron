#!/bin/bash
app_dir=$(realpath "$(dirname "$0")/../../")
fmt_bold="\033[1m"
fmt_red="\033[31m"
fmt_reset="\033[0m"
project=$(dirname "$0" | xargs basename)

if [[ $project = "bin" ]]; then
  cmd=$(basename "$0")

  echo -e "${fmt_bold}${fmt_red}Please run in the context of" \
  "a project (e.g. ./bin/<project>/$cmd)${fmt_reset}"

  exit 1;
fi

case $1 in
  "generate")
    app_dir=$(realpath "$(dirname "$0")/../../")
    cmd="30 8 * * 1-5 $app_dir/bin/$project/start --paper >> $app_dir/log/development.log 2>&1"

    echo -e "$cmd"
  ;;

  "restart")
    sudo service rsyslog restart
    sudo service cron restart
  ;;
esac
