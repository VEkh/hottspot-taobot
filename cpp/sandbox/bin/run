#!/bin/bash

srcs="${*:-./sandbox.cpp}"

args=(
  "-iquote'.'"
  "-iquote'./src'"
  "-isystem'./deps/build/include'"
  "$([[ $OSTYPE =~ ^darwin.* ]] && echo "-isystem/opt/homebrew/opt/openssl@3/include")"
  "-std=c++17"
  "-o './.output'"
  "$srcs"
  "$([[ $OSTYPE =~ ^darwin.* ]] && echo "-L/opt/homebrew/opt/openssl@3/lib")"
  "-lcrypto"
  "-lcurl"
  "-lpthread"
  "-lssl"
)

echo -e "${args[@]}" | xargs g++ && ./.output

'rm' -f ./.output
